# Phase 8: 모바일 UX 및 폼 안정성

PWA 적용 후 모바일 네이티브 앱과 같은 사용자 경험을 위한 필수적인 UX 개선과 폼 처리 안정성을 강화합니다.

## 🎯 목표

- 모바일 입력 환경 최적화 (확대/축소 제어)
- 폼 데이터 유실 방지 (페이지 이동 시 임시 저장)
- 중복 제출 방지 (연타 방지)

## 📋 작업 목록

### 8.1 모바일 입력 UX 개선

#### 문제점
- iOS Safari에서 input 포커스 시 자동 확대되어 불편함
- 핀치/스와이프로 확대/축소가 가능하여 앱 같은 느낌이 떨어짐

#### 해결 방안
- [ ] **viewport 메타 태그 설정**
  - `maximum-scale=1.0`: 최대 확대 비율 제한
  - `user-scalable=no`: 사용자 확대/축소 비활성화
  - 적용 위치: `src/app/layout.tsx`

- [ ] **input 폰트 사이즈 조정**
  - iOS에서 16px 미만일 때 자동 확대되므로 최소 16px로 설정
  - 전역 CSS 또는 Tailwind config에서 기본 폰트 사이즈 조정

---

### 8.2 폼 데이터 임시 저장 (Draft)

#### 문제점
- 북마크 생성 중 폴더 생성 페이지로 이동하면 입력했던 정보가 모두 사라짐
- 사용자가 다시 입력해야 하는 불편함 발생

#### 해결 방안
- [ ] **localStorage 기반 Draft 저장 훅 구현**
  - `useFormDraft(key: string)` 커스텀 훅 생성
  - 입력 중인 데이터를 `localStorage`에 자동 저장
  - 페이지 재진입 시 Draft 데이터 복원
  - 제출 완료 후 Draft 삭제

- [ ] **구현 대상 페이지**
  - `/bookmark/create` - 북마크 생성 폼
  - `/bookmark/[id]/edit` - 북마크 수정 폼

- [ ] **Draft 관리 정책**
  - Draft 유효 기간 설정 (예: 24시간)
  - 민감 정보는 저장하지 않음
  - 제출 성공 시 즉시 Draft 삭제

---

### 8.3 중복 제출 방지

#### 문제점
- 폴더/북마크 생성 버튼 연타 시 여러 개가 생성됨
- 네트워크 지연 시 사용자가 여러 번 클릭할 가능성

#### 해결 방안
- [ ] **Mutation `isPending` 상태 활용**
  - 제출 중에는 버튼 비활성화
  - 로딩 상태 표시 ('저장 중...')

- [ ] **적용 대상**
  - 북마크 생성/수정 폼 (`/bookmark/create`, `/bookmark/[id]/edit`)
  - 폴더 생성/수정 폼 (`/folder/manage`)
  - 즐겨찾기 토글 (`FavoriteButton`)
  - 삭제 버튼 (`MoreButton`)

---

## 💡 구현 방향성

### 모바일 입력 최적화
- viewport 메타 태그로 확대/축소 동작 제어
- 모든 input 요소의 최소 폰트 사이즈를 16px로 통일하여 자동 확대 방지

### 폼 Draft 저장
- React Hook Form의 `watch`와 `useEffect`를 조합하여 입력값 변경 시 자동 저장
- 페이지 마운트 시 Draft 존재 여부 확인 후 복원 여부 사용자에게 안내
- 제출 성공(`onSuccess`) 시 Draft 삭제

### 중복 제출 차단
- React Query의 `isPending` 상태를 버튼의 `disabled` 속성과 연결
- `isPending` 상태에 따라 버튼 텍스트 및 스타일 변경하여 시각적 피드백 제공

---

## 📊 예상 효과

### 사용자 경험
- **모바일 입력 UX**: 확대/축소 이슈 해결로 입력 편의성 향상, 네이티브 앱과 동일한 경험
- **폼 데이터 보존**: 페이지 이동 시에도 데이터 유실 없음, 재입력 불필요
- **안정성**: 네트워크 지연 상황에서도 중복 생성 차단

### 개발
- 재사용 가능한 `useFormDraft` 훅으로 모든 폼에 쉽게 적용
- 기존 React Query 패턴 활용으로 추가 라이브러리 불필요